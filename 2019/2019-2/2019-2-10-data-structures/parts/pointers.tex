% pointers.tex

%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{exampleblock}{Compactation (Problem 10.3-4)}
    Keep all elements of a doubly linked list compact in storage,
    using the first \red{$n$} index locations in the multiple-array representation.

    \[
      \blue{\text{\textsc{Allocate-Object}() \quad \textsc{Free-Object}(x)}}
    \]
  \end{exampleblock}

  \vspace{0.30cm}
  \begin{columns}
    \column{0.50\textwidth}
      \fig{width = 0.80\textwidth}{figs/list-multiple-array}
    \column{0.50\textwidth}
      \pause
      \fig{width = 0.80\textwidth}{figs/after-compact-8}
  \end{columns}

  \pause
  \vspace{0.50cm}
  \[
    \red{{\textsc{List-Insert}(L, x)} \quad \textsc{List-Delete}(L, x)}
  \]
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}{}
  \[
    \textsc{Allocate-Object}() \quad \textsc{List-Insert}(L, x)
  \]

  \begin{columns}
    \column{0.33\textwidth}
      \pause
      \input{tables/compact-list-1}
    \column{0.33\textwidth}
      \pause
      \input{tables/compact-list-2}
    \column{0.33\textwidth}
      \pause
      \input{tables/compact-list-4}
  \end{columns}

  \pause
  \vspace{0.50cm}
  \[
    x \gets free \quad free \gets free + 1 \quad \text{Return } x
  \]
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}{}
  \[
    \textsc{List-Delete}(L, x) \quad \textsc{Free-Object}(x)
  \]

  \pause 
  \[
    \blue{\textsc{List-Delete}(L, 2)}
  \]

  \begin{columns}
    \column{0.50\textwidth}
      \input{tables/compact-list-4}
    \column{0.50\textwidth}
      \pause
      \input{tables/compact-list-3}
  \end{columns}

  \pause
  \begin{center}
    Moving the \red{elements} (not pointers) after $x$ forward
  \end{center}
  \[
    O(n)
  \]
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{exampleblock}{\textsc{Compactify-List} (Problem 10.3-5)}
    \[
      \textsc{Compactify-List}(L, F)
    \]

    \[
      L: \text{ doubly linked list}, \quad |L| = n
    \]
    \[
      F: \red{\text{doubly}} \text{ linked free list}, \quad |F| = m - n
    \]

    \[
      \blue{\Theta(n)}
    \]
  \end{exampleblock}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}{}
  \fig{width = 0.60\textwidth}{figs/before-compact}

  \fig{width = 0.50\textwidth}{figs/after-compact}

  \pause
  \begin{center}
    \blue{Swap $(0,1)$ pairs following $(F, L)$}
  \end{center}

  \pause
  \begin{center}
    \red{Swap only when $L > n \land F \le n$}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%